var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";var a;!function(a){var b=function(){function a(){}return a.InOrderTraversal=function(a){if(null==a)return[];for(var b=[],c=[a];c.length>0;){var d=c.pop();b.push(d);for(var e=d.childNodes.length-1;e>=0;e--)c.push(d.childNodes[e])}return b},a}();a.Traverser=b}(a||(a={}));var b;!function(a){var b=function(){function a(){}return a.findCommonSubString=function(a,b){if(null==a||null==b)return null;for(var c="",d=0;d<Math.min(a.length,b.length)&&a.charAt(d)==b.charAt(d);d++)c+=a.charAt(d);return c},a.areEqual=function(b,c){return null==b&&null==c?!0:null==b&&null!=c||null!=b&&null==c?!1:b.nodeType!=c.nodeType?!1:b.nodeName!=c.nodeName?!1:b.nodeValue!=c.nodeValue?!1:a.areNodeAttributesEqual(b.attributes,c.attributes)?!0:!1},a.areNodeAttributesEqual=function(a,b){if(null==a&&null==b)return!0;if(null==a&&null!=b)return!1;if(null==b&&null!=a)return!1;if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++){var d=a.item(c),e=b.getNamedItem(d.name);if("class"==d.name&&e&&"class"==e.name){var f=d.value.split(/\s+/).sort(),g=e.value.split(/\s+/).sort();if(f.length!=g.length)return!1;for(var h=0;h<f.length;h++)if(f[h]!=g[h])return!1}else if(null==e||d.value!=e.value)return!1}return!0},a}();a.NodeComparisonStrategy=b}(b||(b={}));var c,d=b.NodeComparisonStrategy;!function(a){var b=function(){function a(){this.leftCommonSubTree=null}return a}();a.CommonLeftSubTree=b;var c=function(){function a(){}return a.areNodesTextNodes=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];if(null==a||0==a.length)return!1;for(var c=0;c<a.length;c++)if(!(a[c]instanceof Text))return!1;return!0},a.findCommonLeftSubTree=function(c,e){if(null==c||null==e)throw new Error("You must provide non null values for parameters");for(var f,g,h=d.areEqual,i=new b,j=!1,k=[c],l=[e],m=[];!j;){var n,o;if(n=k[k.length-1],o=l[l.length-1],m.indexOf(n)>-1||h(n,o)||a.areNodesTextNodes(n,o)){var p=n.cloneNode(!1),q=o.cloneNode(!1);if(a.areNodesTextNodes(n,o)){var r=d.findCommonSubString(n.wholeText,o.wholeText);p=document.createTextNode(r),q=document.createTextNode(r),n.wholeText!=o.wholeText&&(j=!0)}-1==m.indexOf(n)&&(f?(f[f.length-1].appendChild(p),g[g.length-1].appendChild(q),f.push(p),g.push(q)):(i.leftCommonSubTree=p,f=[p],g=[q]),m.push(n));var s=f[f.length-1],t=g[g.length-1];s.childNodes.length<n.childNodes.length&&t.childNodes.length<o.childNodes.length?(k.push(n.childNodes[s.childNodes.length]),l.push(o.childNodes[t.childNodes.length])):n.childNodes.length!=o.childNodes.length?j=!0:(k.pop(),l.pop(),f.pop(),g.pop(),0==k.length&&(j=!0))}else j=!0}return i},a}();a.CommonLeftSubTreeFinder=c}(c||(c={}));var e;!function(b){var c=a.Traverser,d=function(){function a(a,b,c,d,e){void 0===e&&(e=[]),this.childNodes=[],this.parent=a,this.node=b,this.childNodes=e,this.isInCommonSubTree=c,this.displayStrategy=d}return a.prototype.getNumberKeyPressesToReveal=function(){return this.displayStrategy.numberKeyPressesToReveal},a}();b.TreeElement=d;var e=function(){function a(a){if(this.numberKeyPressesToReveal=0,null==a)throw Error("node must have a value");this.node=a,this.node.nodeType==Node.TEXT_NODE&&(this.numberKeyPressesToReveal=this.node.textContent.length)}return a.prototype.displayNode=function(a,b){if(a.nodeType==Node.TEXT_NODE){var c=a.textContent;return document.createTextNode(c.substring(0,b))}return a},a}();b.DisplayStrategy=e;var f=function(){function a(){}return a.prototype.isMatch=function(a){return!0},a.prototype.getDisplayStrategy=function(a){return new e(a)},a}();b.Matcher=f;var g=function(){function a(a,b){this.matchers=[new f],this.fullTreeRoot=a,this.commonSubTreeRoot=b,b&&this.splitLastNode()}return a.prototype.splitLastNode=function(){var a=c.InOrderTraversal(this.fullTreeRoot),b=c.InOrderTraversal(this.commonSubTreeRoot),d=a[b.length-1],e=b[b.length-1];if(d.nodeType==Node.TEXT_NODE&&d.textContent!=e.textContent){var f=e.textContent.length;d.splitText(f)}},a.prototype.addMatcher=function(a){this.matchers.push(a)},a.prototype.buildTree=function(){var a=this;if(null==this.fullTreeRoot)throw Error("The full tree root must be non-null");var b,e=c.InOrderTraversal(this.commonSubTreeRoot).length,f=0,g=function(c,h){for(var i,j=f++<e,k=0;k<a.matchers.length;k++){var l=a.matchers[k];l.isMatch(h)&&(i=l.getDisplayStrategy(h))}var m=new d(c,h,j,i);null==c?b=m:c.childNodes.push(m);for(var k=0;k<h.childNodes.length;k++)g(m,h.childNodes[k])};return g(null,this.fullTreeRoot),b},a}();b.AugmentedTreeBuilder=g}(e||(e={}));var f,g=(e.TreeElement,a.Traverser);!function(b){var c=function(){function b(a,b){this.fromTree=a,this.toTree=b,this.fromTreeInOrderTraversal=g.InOrderTraversal(a),this.toTreeInOrderTraversal=g.InOrderTraversal(b),this.calculateNumberOfBackspacesUntilCommon(),this.calculateNumberOfKeyPressesUntilFinish()}return b.prototype.calculateNumberOfBackspacesUntilCommon=function(){for(var a=g.InOrderTraversal(this.fromTree),b=0,c=a.length-1;c>=0;c--){var d=a[c];if(d.isInCommonSubTree)break;b+=d.getNumberKeyPressesToReveal()}this.numBackSpacesUntilCommon=b},b.prototype.getTotalKeyPressCount=function(){return this.numBackSpacesUntilCommon+this.numKeyPressesFromCommonUntilFinish},b.prototype.calculateNumberOfKeyPressesUntilFinish=function(){for(var a=g.InOrderTraversal(this.toTree),b=0,c=0;c<a.length;c++){var d=a[c];d.isInCommonSubTree||(b+=d.getNumberKeyPressesToReveal())}this.numKeyPressesFromCommonUntilFinish=b},b.prototype.showRemainingBackspaceContent=function(b){for(var c=this.fromTree.node.cloneNode(!0),d=a.Traverser.InOrderTraversal(c),e=0,f=this.fromTreeInOrderTraversal.length-1;f>=0;f--){var g=this.fromTreeInOrderTraversal[f],h=d[f];if(!(g.getNumberKeyPressesToReveal()+e<b)){var i=h.parentNode,j=g.displayStrategy.displayNode(h,g.getNumberKeyPressesToReveal()-(b-e));if(null==i)return j;i.removeChild(h),(j.nodeType!=Node.TEXT_NODE||j.nodeType==Node.TEXT_NODE&&""!=j.textContent)&&i.appendChild(j);break}h.parentNode.removeChild(h),e+=g.getNumberKeyPressesToReveal()}return c},b.prototype.showRemainingTypedContent=function(a){var b=this.toTree.node.cloneNode(!1),c=b,d=[{element:this.toTree,childIndex:-1}],e=0;if(0==a)return this.toTree.node;for(;d.length;){var f=d[d.length-1];if(f.element.isInCommonSubTree){if(d.length>1&&-1==f.childIndex){var g=f.element.node.cloneNode(!1);c.appendChild(g),c=g}++f.childIndex<f.element.childNodes.length?d.push({element:f.element.childNodes[f.childIndex],childIndex:-1}):(d.pop(),c=c.parentNode)}else{if(!(e+f.element.getNumberKeyPressesToReveal()<a)){var g=f.element.displayStrategy.displayNode(f.element.node,a-e);if(d.length<2)return g;c.appendChild(g);break}if(d.length>1&&-1==f.childIndex){var g=f.element.node.cloneNode(!1);c.appendChild(g),c=g}++f.childIndex<f.element.childNodes.length?d.push({element:f.element.childNodes[f.childIndex],childIndex:-1}):(d.pop(),c=c.parentNode),e+=f.element.getNumberKeyPressesToReveal()}}return b},b.normalizeTree=function(a){if(a){a.normalize();for(var c=0;c<a.childNodes.length;c++)b.normalizeTree(a.childNodes[c])}},b.prototype.printTree=function(a){a=Math.min(1,a),a=Math.max(0,a);var c,d=this.getTotalKeyPressCount(),e=d*a|0;return c=1!=a&&e<=this.numBackSpacesUntilCommon?this.showRemainingBackspaceContent(e):this.showRemainingTypedContent(e-this.numBackSpacesUntilCommon),b.normalizeTree(c),c},b}();b.TreePrinter=c}(f||(f={}));var h=c.CommonLeftSubTreeFinder,i=e.AugmentedTreeBuilder,j=f.TreePrinter,k=function(){function a(){}return a.convertToNode=function(a){return a instanceof jQuery?a[0]:a instanceof Node?a:"string"==typeof a?document.createTextNode(a):null},a.convert=function(b){if(null==b)return null;if(b instanceof Array){for(var c=[],d=0;d<b.length;d++){var e=a.convertToNode(b[d]);if(!e)return null;c.push(e)}return c}if(b instanceof NodeList)return b;if("string"==typeof b){var f=document.createElement("div");return f.innerHTML=b,f.childNodes}return b instanceof jQuery?[b[0]]:b instanceof Node?[b]:null},a}(),l=function(){function a(){this.propName="typed",this.API=2,this.version="0.0.1"}return a.prototype.init=function(a,b,c){if(!(a instanceof Node))return!1;if(null==b||void 0==b.to)return!1;if(this.endingValue=k.convert(b.to),null==this.endingValue)return!1;this.target=a;for(var d=document.createElement("div"),e=0;e<a.childNodes.length;e++)d.appendChild(a.childNodes[e].cloneNode(!0));for(var f=document.createElement("div"),e=0;e<this.endingValue.length;e++)f.appendChild(this.endingValue[e].cloneNode(!0));var g=null;b.stopOnCommon&&(g=h.findCommonLeftSubTree(d,f).leftCommonSubTree);var l=new i(d,g),m=new i(f,g);if(b.customMatchers&&b.customMatchers.length)for(var e=0;e<b.customMatchers.length;e++)l.addMatcher(b.customMatchers[e]),m.addMatcher(b.customMatchers[e]);var n=l.buildTree(),o=m.buildTree();return this.printer=new j(n,o),!0},a.prototype.set=function(a){for(var b=this.printer.printTree(a);this.target.firstChild;)this.target.removeChild(this.target.firstChild);for(;b.firstChild;)this.target.appendChild(b.firstChild)},a}();_gsScope._gsDefine.plugin(new l)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()();